FROM qdacity-tests-base:latest

# Copy repository
WORKDIR /app
COPY ./war/jest.acceptance.config.js /app/war/jest.acceptance.config.js
COPY ./docker /app/docker
COPY ./war/package.json /app/war/package.json
COPY ./realtime-service /app/realtime-service
COPY ./war/tests/acceptance-tests /app/war/tests/acceptance-tests
COPY ./war/assets /app/war/assets
COPY ./target /app/target
COPY ./war/api_config.json /app/war/api_config.json


# Allow execute
# RUN sudo chmod +x ./docker/acceptance-tests/entrypoint.sh
# RUN sudo chmod +x ./docker/acceptance-tests/waitForDevServer.sh

# Run script which starts the devserver and executes the tests
ENTRYPOINT ./docker/acceptance-tests/entrypoint.sh